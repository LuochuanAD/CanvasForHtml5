<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta content="telephone=no" name="format-detection">
		<meta content="email=no" name="format-detection">
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<title>隔离区分布图</title>
		<style type="text/css">
			.top {
				width: 100%;
				height: 38rem;
				text-align: center;
				background: url(isolateTimeBg.png) no-repeat center;
				background-size: contain;
			}
			.secondtop {
				width: 100%;
				height: 38rem;
				text-align: center;
				background: url(travellerOnBg.png) no-repeat center;
				background-size: contain;
			}

			.white::before {
				background-color: white;
			}
			
			
			.tabText {
				position: relative;
				margin-top: 10px;
				padding-left: 2rem;
			}
			
			.tabText::before {
				display: block;
				position: absolute;
				top: 0.5rem;
				left: 0rem;
				width: 1rem;
				height: 1rem;
				content: '';
				border-radius: 0.5rem;
			}
			
			.tabCont td {
				text-align: left;
				font-size: 30px;
				color: white;
			}
			
			.swiper-container {
				width: 100%;
				height: 100%;
				margin-bottom: 5rem;
			}
			.swiper-container-v{
    			width: 100%;
        		height: 700px;
    			}
			.leftdiv {
				float: left;
				clear: both;
				font-size: 40px;
			}
			
			.rightdiv {
				float: right;
				font-size: 40px;
			}
			.aswiper-container {
    				width: 100%;
    				height: 700px;
				} 
			
			.purch::before {
				background-color: white;
			}
			
			.grey::before {
				background-color: yellow;
			}
			
		</style>
		<link rel="stylesheet" href="swiper-3.4.2.min.css">
	</head>

	<body>
		<script src="swiper-3.4.2.min.js"></script>
		<div class="swiper-container swiper-container-h">
			<div class="swiper-wrapper">
				<div class="swiper-slide">
					<div class="top">
						<table width="100%" cellspacing="0px" style="padding-top: 3rem;padding-left: 2rem;">
							<tr>
								<td style="text-align: left;color: white;font-size: 30px;">隔离区内旅客时间分布</td>
								<td rowspan="2" style="text-align: right;color: white;font-size: 50px;">23195</td>
							</tr>
							<tr class="tabCont">
								<td class="tabText white">人数</td>
							</tr>
							<tr>
								<td colspan="2" style="text-align: right;color: white;border-top: 1px solid white;font-size: 30px;">3388</td>
							</tr>
						</table>

						<canvas id="a_canvas" width="950" height="300"></canvas>
						<table width="100%" cellspacing="0px">
							
							<tr>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">00</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">02</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">04</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">06</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">08</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">10</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">12</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">14</td>
								<td style="text-align: center;color: white;border-top: 1px solid white;font-size: 30px;">16</td>
							</tr>
						</table>
					</div>

					<!--<script src="swiper-3.4.2.min.js"></script>-->

					<div class="swiper-container swiper-container-v">
						<div class="swiper-wrapper">
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">00</div>
								<div class="rightdiv">501</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">01</div>
								<div class="rightdiv">501</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">02</div>
								<div class="rightdiv">437</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">03</div>
								<div class="rightdiv">437</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">04</div>
								<div class="rightdiv">468</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">05</div>
								<div class="rightdiv">2107</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">06</div>
								<div class="rightdiv">2107</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">07</div>
								<div class="rightdiv">2110</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">09</div>
								<div class="rightdiv">1800</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">10</div>
								<div class="rightdiv">1800</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">11</div>
								<div class="rightdiv">1600</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">12</div>
								<div class="rightdiv">1400</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">13</div>
								<div class="rightdiv">1400</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">14</div>
								<div class="rightdiv">1500</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">15</div>
								<div class="rightdiv">1600</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">16</div>
								<div class="rightdiv">1400</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">17</div>
								<div class="rightdiv">1500</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">18</div>
								<div class="rightdiv">1700</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 1rem;">
								<div class="leftdiv">19</div>
								<div class="rightdiv">1900</div>
							</div>

						</div>

					</div>
				</div>
				<div class="swiper-slide">
					<div class="secondtop">
						<table style="width: 98%;padding-left: 2.0%;padding-top: 3rem;" cellspacing="0px">
							<tr>
								<td colspan="2" style="text-align: left;font-size: 30px;color: white;">隔离区内旅客区域分布</td>

							</tr>
							<tr class="tabCont">
								<td style="text-align: left;" class="tabText purch">近机位1057</td>
								<td style="text-align: left;" class="tabText grey">远机位355</td>

							</tr>
							<tr>

								<td colspan="2" style="text-align: right;font-size: 20px;color: white;border-top: 1px solid white;">378</td>
							</tr>
						</table>

						<canvas id="bchart" width="910" height="300"></canvas>
						<table style="width: 95%;padding-left: 2.5%;" cellspacing="0px">
							<tr>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">东指廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">北指廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">东翼廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">西指廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">南指廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">西翼廊</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">国内</td>
								<td style="padding-top: 20px;text-align: center;font-size: 30px;color: white;border-top: 1px solid white;">国际</td>
							</tr>
						</table>
					</div>
					<!--<script src="swiper-3.4.2.min.js"></script>-->
					<div class="swiper-container swiper-container-v">
						<div class="swiper-wrapper">

							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<img style="float: left;width: 50px; height: 50px;" src="near.png" alt="near" />
								<div style=" float: left;width: 300;height: 30px;font-size: 45px;text-align: center;">近机位</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">东指廊</div>
								<div class="rightdiv">378</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">北指廊</div>
								<div class="rightdiv">195</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">东翼廊</div>
								<div class="rightdiv">0</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">西指廊</div>
								<div class="rightdiv">138</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">南指廊</div>
								<div class="rightdiv">58</div>
							</div>
							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv">西翼廊</div>
								<div class="rightdiv">230</div>
							</div>

							<div class="swiper-slide" style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<img style="float: left;width: 50px;height: 50px;" src="far.png" alt="far" />
								<div style="float: left;width: 300;height: 30px;font-size: 45px;text-align: center;">远机位</div>
							</div>

							<div class="swiper-slide " style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem; ">
								<div class="leftdiv ">国内</div>
								<div class="rightdiv ">378</div>
							</div>

							<div class="swiper-slide " style="width: 100%;height: 5rem;border-bottom: 1px solid gray;padding-bottom: 1rem;padding-top: 4rem;">
								<div class="leftdiv ">国际</div>
								<div class="rightdiv ">0</div>
							</div>

						</div>

					</div>
				</div>
			</div>
			<div class="swiper-pagination swiper-pagination-h"></div>
		</div>

		<script type="text/javascript">
			var swiper = new Swiper('.swiper-container-v', {
				//      pagination: '.swiper-pagination',
				direction: 'vertical',

				slidesPerView: 'auto',

				spaceBetween: 0,
				mousewheelControl: true
			});
			var swiper1 = new Swiper('.swiper-container-h', {
				//      pagination: '.swiper-pagination',
				direction: 'horizontal',
				pagination: '.swiper-pagination-h',
				slidesPerView: 'auto',

				spaceBetween: 0,
				mousewheelControl: true
			});
		</script>
		<script type="text/javascript">

			function firstChart(){
				var data = [501, 501, 437, 437, 468, 2107, 2107, 2110, 1800, 1800, 1600, 1400, 1400, 1500, 1600, 1400, 1500, 1700, 1900];

					// 获取上下文
					var a_canvas = document.getElementById('a_canvas');
					var context = a_canvas.getContext("2d");
					var minDataValue = 100000000;
					for(var i = 0; i < data.length; i++) {
						var barVal = parseInt(data[i]);
						if(parseInt(barVal) < parseInt(minDataValue))
							minDataValue = barVal;
					}

					// 绘制背景
					var gradient = context.createLinearGradient(0, 0, 0, 300);

					// gradient.addColorStop(0,"#e0e0e0");
					//gradient.addColorStop(1,"#ffffff");

					context.fillStyle = gradient;

					context.fillRect(0, 0, a_canvas.width, a_canvas.height);

					// 描绘边框
					var grid_cols = data.length + 1;
					var grid_rows = 4;
					var cell_height = a_canvas.height / grid_rows;
					var cell_width = a_canvas.width / grid_cols;
					context.lineWidth = 1;
					context.strokeStyle = "#a0a0a0";

					var max_v = 0;

					for(var i = 0; i < data.length; i++) {
						var d = 0;
						if(data[i] < 0) {
							d = d - data[i];
						} else { d = data[i]; };
						if(d > max_v) { max_v = d };
					}
					max_v = max_v * 1.1;
					// 将数据换算为坐标
					var points = [];
					for(var i = 0; i < data.length; i++) {
						var v = data[i];
						var px = cell_width * 　(i + 1);
						var py = a_canvas.height - a_canvas.height * (v / max_v);
						points.push({ "x": px, "y": py });
					}
					// 绘制折现
					context.beginPath();
					context.moveTo(points[0].x, points[0].y);
					for(var i = 1; i < points.length; i++) {
						context.lineTo(points[i].x, points[i].y);
					}

					context.lineWidth = 4;
					context.strokeStyle = "white";
					context.stroke();

					//绘制坐标图形
					for(var i in points) {
						var p = points[i];
						context.beginPath();
						context.lineWidth = 4;
						context.radius = 4;
						context.arc(p.x, p.y, 7, 0, 2 * Math.PI);
						//实心圆
						/*
						 context.fillStyle = "#000";*/
						//空心圆
						context.strokeStyle = "white";
						context.stroke();
						context.fillStyle = "#FC6E6B";
						context.fill();
					}
				context.save(); //save和restore可以保证样式属性只运用于该段canvas元素
                context.strokeStyle = "white"; //设置描边样式
                context.fillStyle="white";
				
              	context.font = "40px sans-serif"; //设置字体大小和字体
                
                //绘制字体，并且指定位置
                context.fillText("0", a_canvas.width*0.97, a_canvas.height*0.98);

              	context.stroke();//执行绘制
                
                context.restore();
			}
			
			
			
			var arrVisitors = new Array();
        arrVisitors[0] = "东指廊, 378 ";
        arrVisitors[1] = "北指廊, 195 ";
        arrVisitors[2] = "东翼廊, 0 ";
        arrVisitors[3] = "西指廊, 138 ";
        arrVisitors[4] = "南指廊, 58 ";
        arrVisitors[5] = "西翼廊, 230 ";
        arrVisitors[6] = "国内, 378 ";
        arrVisitors[7] = "国际, 0 ";
        
        var canvas_b;
        var context_b;
        // chart properties
        var cWidth, cHeight, cMargin, cSpace;
        var cMarginSpace, cMarginHeight;
        // bar properties
        var bWidth, bMargin, totalBars, maxDataValue;
        var bWidthMargin;
        // bar animation
        var ctr, numctr, speed;
        // axis property
        var totLabelsOnYAxis;
        // barchart constructor
        window.onload=function (){
        	barChart();
        	firstChart();
        }
        function barChart() {
            canvas_b = document.getElementById('bchart');
            if (canvas_b && canvas_b.getContext) {
                context_b = canvas_b.getContext('2d');
            }
            chartSettings(context_b,canvas_b);
            
            drawChartWithAnimation(context_b);
           drawText(context_b,canvas_b);
        }
			
			function chartSettings(ctx,canvs) {
            // chart properties
            cMargin = 25;
            cSpace = 60;
            cHeight = canvs.height - 2 * cMargin - cSpace;
            cWidth = canvs.width - 2 * cMargin - cSpace;
            cMarginSpace = cMargin + cSpace;
            cMarginHeight = cMargin + cHeight;
            // bar properties
            bMargin = 15;
            totalBars = arrVisitors.length;
            bWidth = ((cWidth / totalBars) - bMargin)/4;
            // find maximum value to plot on chart
            maxDataValue = 0;
            for (var i = 0; i < totalBars; i++) {
                var arrVal = arrVisitors[i].split(", ");
                var barVal = parseInt(arrVal[1]);
                if (parseInt(barVal) > parseInt(maxDataValue))
                    maxDataValue = barVal;
            }
            totLabelsOnYAxis = 10;
            ctx.font = "10pt Garamond ";
            
            // initialize Animation variables
            ctr = 100;
            numctr = 100;
            speed = 10;
        }
        
        
        
        function drawChartWithAnimation(ctx) {
            // Loop through the total bars and draw
            for (var i = 0; i < totalBars; i++) {
                var arrVal = arrVisitors[i].split(", ");
                bVal = parseInt(arrVal[1]);
                bHt = (bVal * cHeight / maxDataValue) / numctr * ctr;
                bX =  (i * (bWidth + bMargin +cMarginSpace)) + bMargin;
                
                bY = cMarginHeight - bHt+70;
                if(i<6){
                	if(bHt>0){
                		drawRectangle(bX, bY, bWidth, bHt,ctx, true);
                	}
                	
                }else{
                	if(bHt>0){
                		drawRectangle1(bX, bY, bWidth,bHt ,ctx, true);
                	}
                	
                }
                
            }

        }
        function drawText(ctx,canvs){
                ctx.save(); //save和restore可以保证样式属性只运用于该段canvas元素
                ctx.strokeStyle = "white "; //设置描边样式
                ctx.fillStyle="white ";
				
                ctx.font = "20px sans-serif "; //设置字体大小和字体
                
                //绘制字体，并且指定位置
                ctx.fillText("0 ", canvs.width*0.98, canvs.height*0.98);
 
              	ctx.stroke();//执行绘制
                
                ctx.restore();
            } 
        function drawRectangle(x, y, w, h,ctx, fill) {
            ctx.beginPath();   
            
            ctx.rect(x, y, w, h);  
            drawRoundRect( x, y,w,h,w/2,ctx);
            ctx.closePath();
            ctx.stroke();
            if (fill) {
                var gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, '#3DCEBE');
                gradient.addColorStop(1, '#3DCEBE');
                ctx.fillStyle = gradient;
                ctx.strokeStyle = gradient;
                ctx.fill();
            }
        }
        function drawRectangle1(x, y, w, h,ctx, fill) {
            ctx.beginPath(); 
            
            ctx.rect(x, y, w, h);  
          	drawRoundRect( x, y,w,h,w/2,ctx);
            ctx.closePath();
            ctx.stroke();
            if (fill) {
                var gradient = ctx.createLinearGradient(0, 0, 0, 300);
                gradient.addColorStop(0, 'yellow');
                gradient.addColorStop(1, 'yellow');
                ctx.fillStyle = gradient;
                ctx.strokeStyle = gradient;
                ctx.fill();
            }
        }
        function drawRoundRect( x, y, width, height, radius,ctx){
        	var value=height-width;
        	if(value<0){
        		radius=1;
        	}
        ctx.beginPath();   
        ctx.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 3 / 2);   
        ctx.lineTo(width - radius + x, y);   
        ctx.arc(width - radius + x, radius + y, radius, Math.PI * 3 / 2, Math.PI * 2);   
        ctx.lineTo(width + x, height-radius+y );   
        ctx.arc(width - radius + x, height-radius+y, radius, 0, Math.PI * 1 / 2);   
        ctx.lineTo(radius + x, height +y);   
        ctx.arc(radius + x, height-radius+y, radius, Math.PI * 1 / 2, Math.PI);   
        ctx.closePath();   
    }   
			
			
		</script>
	</body>

</html>