<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="telephone=no" name="format-detection">
	<meta content="email=no" name="format-detection">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<title>机位</title>
		<style type="text/css">
			.top{
				text-align: center;
				vertical-align: middle;
				width: 100%;
				height: 150px;
				font-size: 30px;
				margin-top: 80px;
			}
			#leftButton{
				background: #1DABE2;
				color: white;
				border-bottom-left-radius: 1rem; 
				border-top-left-radius: 1rem;
				border-bottom-right-radius: 0; 
				border-top-right-radius: 0;
				width: 45%;
				height: 6rem;
				font-size: 40px;
				border: 1px solid #1DABE2 ;
				-webkit-appearance:square-button;
				
			}
			#rightButton{
				background: white;
				color:  #1DABE2;
				border-bottom-left-radius: 0; 
				border-top-left-radius: 0;
				border-bottom-right-radius: 1rem; 
				border-top-right-radius: 1rem;
				width: 45%;
				height: 6rem;
				font-size: 40px;
				border: 1px solid #1DABE2 ;
				-webkit-appearance: square-button;
				
			}
			.middle{
				width: 100%;
				height: 24rem;
				background: url(animationLine.png) no-repeat center;
				background-size: contain;
			}
			.purch::before{
				background-color:green;
			}
			.grey::before{
				background-color: #808080;
			}
			
			.tabText{
				position: relative;
				margin-top: 10px;
			}
			.tabText::before{
				display: block;
				position: absolute;
				top: 0.5rem;
				left: 10rem;
				width: 2rem;
				height: 2rem;
				content: '';
				border-radius: 1rem;
			}
			.tabCont td{
				text-align: center;
				vertical-align: middle;
				font-size: 50px;
				color: gray;
			}
			.aswiper-button-prev{
				
			}
			.aswiper-button-next{
				
			}
		</style>
		<link rel="stylesheet" href="swiper-3.4.2.min.css">
	</head>
	<body>
		<div class="top">
			<input class="aswiper-button-prev" type="button"  id="leftButton" value="主机位" onclick="return leftButtonClicked()"/><input class="aswiper-button-next" type="button" id="rightButton" value="子机位"onclick="rightButtonClicked()"/>
		</div>
		
		<script src="swiper-3.4.2.min.js"></script>
		
		<div class="swiper-container">
			<div class="swiper-wrapper">
				<div class="swiper-slide">
					<div style="width: 100%; height: 600px; text-align: center;">
			<canvas id="canvas_a" width="600" height="600"></canvas>
		</div>
		<div class="middle">
		<table style="width: 100%; padding-top: 6rem;"cellspacing="0px">
			<tr>
				<td colspan="2" style="text-align: center;vertical-align: middle;color: green;font-size: 30px;">21%</td>
			</tr>
			<tr>
				<td width="50%" style="text-align: center;color: black;font-size: 100px;">42</td>
				<td width="50%" style="text-align: center;color: black;font-size: 100px;">169</td>
			</tr>
			<tr class="tabCont">
				<td width="50%" class="tabText purch">占用</td>
				<td width="50%" class="tabText grey" >剩余</td>
			</tr>
		</table>
		</div>
	<div  style="width: 100%;height: 15rem;">
		<table width="40%" style="float: left;clear: both;border: 2px solid gray;border-radius: 1rem;margin-left: 5%;">
			<tr>
				<td rowspan="2" width="25%" style="text-align: right;"><img src="on.png" alt="on" width="80px" height="80px"/></td>
				<td width="20%" height="65%" style="text-align: center;color: black;font-size: 60px;">19</td>
				<td width="40%" style="text-align: center;color: gray;font-size: 40px;">机位占用</td>
			</tr>
			<tr>
				<td colspan="2" width="75%" height="50%" style="text-align: center;font-size: 45px;color: black;">&lt;一小时进港</td>
			</tr>
		</table>
		<table width="40%" style="float: right;border: 2px solid gray;border-radius: 1rem;margin-right: 5%;">
			<tr>
				<td rowspan="2" width="25%" style="text-align: right;"><img src="out.png" alt="on" width="80px" height="80px"/></td>
				<td width="20%" height="65%" style="text-align: center;color: black;font-size: 60px;">24</td>
				<td width="40%" style="text-align: center;color: gray;font-size: 40px;">机位占用</td>
			</tr>
			<tr>
				<td colspan="2" width="75%" height="50%" style="text-align: center;font-size: 45px;color: black;">&lt;一小时出港</td>
			</tr>
		</table>
	</div>
				</div>
				<div class="swiper-slide">
					<div style="width: 100%; height: 600px; text-align: center;">
			<canvas id="canvas_b" width="600" height="600"></canvas>
		</div>
		<div class="middle">
		<table style="width: 100%; padding-top: 6rem;"cellspacing="0px">
			<tr>
				<td colspan="2" style="text-align: center;vertical-align: middle;color: green;font-size: 30px;">19%</td>
			</tr>
			<tr>
				<td width="50%" style="text-align: center;color: black;font-size: 100px;">45</td>
				<td width="50%" style="text-align: center;color: black;font-size: 100px;">184</td>
			</tr>
			<tr class="tabCont">
				<td width="50%" class="tabText purch">占用</td>
				<td width="50%" class="tabText grey" >剩余</td>
			</tr>
		</table>
		</div>
	<div  style="width: 100%;height: 15rem;">
		<table width="40%" style="float: left;clear: both;border: 2px solid gray;border-radius: 1rem;margin-left: 5%;">
			<tr>
				<td rowspan="2" width="25%" style="text-align: right;"><img src="on.png" alt="on" width="80px" height="80px"/></td>
				<td width="20%" height="65%" style="text-align: center;color: black;font-size: 60px;">19</td>
				<td width="40%" style="text-align: center;color: gray;font-size: 40px;">机位占用</td>
			</tr>
			<tr>
				<td colspan="2" width="75%" height="50%" style="text-align: center;font-size: 45px;color: black;">&lt;一小时进港</td>
			</tr>
		</table>
		<table width="40%" style="float: right;border: 2px solid gray;border-radius: 1rem;margin-right: 5%;">
			<tr>
				<td rowspan="2" width="25%" style="text-align: right;"><img src="out.png" alt="on" width="80px" height="80px"/></td>
				<td width="20%" height="65%" style="text-align: center;color: black;font-size: 60px;">24</td>
				<td width="40%" style="text-align: center;color: gray;font-size: 40px;">机位占用</td>
			</tr>
			<tr>
				<td colspan="2" width="75%" height="50%" style="text-align: center;font-size: 45px;color: black;">&lt;一小时出港</td>
			</tr>
		</table>
	</div>
				</div>
			</div>
			
		</div>
		<script>
			var swiper = new Swiper('.swiper-container', {
//      pagination: '.swiper-pagination',
        direction: 'horizontal',
        
        slidesPerView: 'auto',
        nextButton: '.aswiper-button-next',
   	 	prevButton: '.aswiper-button-prev',
        spaceBetween: 0,
        mousewheelControl: true,
        onSlideNextStart: function(swiper){
      		rightButtonClicked();
      			
    		},
        onSlidePrevStart: function(swiper){
      		leftButtonClicked();
      			
    		}
    });  
		</script>
		
		

		<script type="text/javascript">

			
			function leftButtonClicked(){
				
				var left=document.getElementById("leftButton");
				var right=document.getElementById("rightButton");
				left.style.background= "#1DABE2";
				left.style.color="white";
				right.style.background="white";
				right.style.color= "#1DABE2";
				
			}
			function rightButtonClicked(){
				var left=document.getElementById("leftButton");
				var right=document.getElementById("rightButton");
				left.style.background="white";
				left.style.color= "#1DABE2";
				right.style.background= "#1DABE2";
				right.style.color="white";
				
			}
			window.onload = function(){
            var canvas_a = document.getElementById('canvas_a');  //获取canvas元素
                context_a = canvas_a.getContext('2d');  //获取画图环境，指明为2d
                centerX_a = canvas_a.width/2;  //Canvas中心点x轴坐标
                centerY_a = canvas_a.height/2;  //Canvas中心点y轴坐标
                rad = Math.PI*2/100, //将360度分成100份，那么每一份就是rad度
                speed_a = 5; //加载的快慢就靠它了 
                var value_a=0.21*100;
                total_a=211;
                
              var  canvas_b=document.getElementById('canvas_b');
              context_b=canvas_b.getContext('2d');
              centerX_b=canvas_b.width/2;
              centerY_b=canvas_b.height/2;
              speed_b=5;
              var value_b=0.19*100;
                total_b=229;
                
                canvas_a.onclick=function(){
                	window.location.href="placeDetail.html"
                }
                canvas_b.onclick=function(){
                	window.location.href="placeDetail.html"
                }
                
            //绘制外圈
            function blueCircle(n,ctx,centerX,centerY){
            
            	
                ctx.save();
                ctx.strokeStyle = "#1DABE2"; //设置描边样式
                ctx.lineCap="round";
                ctx.radius=30;
                ctx.lineWidth = 30; //设置线宽
                ctx.beginPath(); //路径开始
                ctx.arc(centerX, centerY, 200 , -Math.PI/2, -Math.PI/2 -n*rad,true); //用于绘制圆弧context.arc(x坐标，y坐标，半径，起始角度，终止角度，顺时针/逆时针)
                ctx.stroke(); //绘制
                ctx.closePath(); //路径结束
                ctx.restore();
            }
            //绘制内圈
            function whiteCircle(ctx,centerX,centerY){
                ctx.save();
                ctx.beginPath();
                ctx.radius=20;
                ctx.lineWidth = 20;
                
                ctx.strokeStyle = "lightgray";
                ctx.arc(centerX, centerY, 200 , 0, Math.PI*2, false);
                ctx.stroke();
                ctx.closePath();
                ctx.restore();
            }  
            //文字绘制
            function text(ctx,centerX,centerY,value){
                ctx.save(); //save和restore可以保证样式属性只运用于该段canvas元素
                ctx.strokeStyle = "lightgray"; //设置描边样式
                ctx.fillStyle="black";
				
              ctx.font = "60px sans-serif"; //设置字体大小和字体
                
                //绘制字体，并且指定位置
                ctx.fillText(value, centerX-45, centerY-20);
                ctx.font = "40px sans-serif";
                ctx.fillStyle="#808080";
                ctx.fillText("机位", centerX-45, centerY+40);
                ctx.stroke(); //执行绘制
                ctx.restore();
            } 
            
            //动画循环
            (function drawFrame_a(){
                window.requestAnimationFrame(drawFrame_a, canvas_a);
                context_a.clearRect(0, 0, canvas_a.width, canvas_a.height);
                whiteCircle(context_a,centerX_a,centerY_a);
                text(context_a,centerX_a,centerY_a,total_a);
                
                blueCircle(speed_a,context_a,centerX_a,centerY_b);
                if(speed_a>0&&speed_a<value_a) {
                	speed_a += 1;
                }else{
                	speed_a=value_a;
                }
                
            }());
            //动画循环
            (function drawFrame_b(){
                window.requestAnimationFrame(drawFrame_b, canvas_b);
                context_b.clearRect(0, 0, canvas_b.width, canvas_b.height);
                whiteCircle(context_b,centerX_b,centerY_b);
                text(context_b,centerX_b,centerY_b,total_b);
                
                blueCircle(speed_b,context_b,centerX_b,centerY_b);
                if(speed_b>0&&speed_b<value_b) {
                	speed_b += 1;
                }else{
                	speed_b=value_b;
                }
                
            }());
        }
		</script>
	</body>
</html>
